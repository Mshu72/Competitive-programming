## 問題の本質

すべての部品を頭または体のどちらかに取り付ける必要があり、**頭の重さ ≤ 体の重さ**という制約の下で、嬉しさの合計を最大化する問題です。

## 解答方針

動的計画法（DP）を使います。

### DP の設計

`dp[i][j]` = 最初の i 個の部品を配置したとき、頭と体の重さの差が j である場合の最大の嬉しさ

ここで、差 j = (体の重さ) - (頭の重さ) とします。

### 状態遷移

各部品 i について2つの選択肢があります：

1. **頭に取り付ける**: 
   - 差が j + W[i] になる（体が相対的に重くなる）
   - 嬉しさは H[i] を加算

2. **体に取り付ける**: 
   - 差が j - W[i] になる（頭が相対的に重くなる）
   - 嬉しさは B[i] を加算

### DP の実装のポイント

- 差 j は負の値もとりうるため、オフセットを設定する必要があります
- 最大の差は全部品を体につけた場合の総重量 ≤ 250,000
- したがって j の範囲は [-250000, 250000] 程度で、配列のインデックスとして `j + offset` を使用

### 答えの求め方

全部品を配置した後、`dp[N][j]` の中で **j ≥ 0**（体の重さ ≥ 頭の重さ）を満たす状態の中から最大値を選びます。

### 計算量

- 時間計算量: O(N × W_sum) = O(500 × 250,000) = O(125,000,000) → 十分間に合います
- 空間計算量: メモリ最適化で O(W_sum) にできます
